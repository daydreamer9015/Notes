* AWS 콘솔로 ECS 배포 환경 구축
    1. 현재 프로젝트 로컬에서만 실행되는 상태
    2. AWS ECS에 Docker 컨테이너로 배포해서 실제 인터넷에서 접속 가능한 서비스로 만들려고 함
    3. 그러려면 AWS에서 네트워크, 보안, 서버 환경을 먼저 만들어야 함

* 보안 그룹 vs 서브넷
    1. VPC(Virtual Private Cloud)
        1) 회사 건물의 보안 시스템
        2) Subnet
            - Public Subnet
                - 1층 로비 (외부인 출입 가능, 방문객 접수 공간)
                - ALB (접수 데스크)
                    - 역할 : 방문객 요청 받음
                    - 비유 : 접수 직원
                    - Public IP 필요
                    - 외부 접근 허용
                - NAT 게이트웨이
                    - 역할 : 내부에서 외부로 나갈 때
                    - 비유 : 직원 전용 출입문
                    - 단방향 : 내부 => 외부만
                - 보안 그룹 (경비원-출입 규칙 검사)
                    - 비유 : 신분증 확인, 출입증 체크하는 경비원
                    - 규칙 : HTTP(80), HTTPS(443) 포트만 허용

            - Private Subnet (사무실, 직원만 출입)
                - 비유 : 2층 이상 사무실, 외부인 출입 금지
                - ECS Task (개발실 사무실)
                    - 역할 : 실제 업무 수행
                    - 비유 : 개발자가 일하는 공간
                    - Public IP 불필요
                    - 외부 직접 접근 차단
                             |
                             | 내부 연결
                            \|/
                - RDS (금고/서버실)
                    - 역할 : 중요 데이터 보관
                    - 비유 : 기밀 서류 보관소
                    - Public IP 불필요
                    - 최고 수준 보안
                - 보안 그룹 (각 사무실마다 다른 경비원)
                    - 비유 : 각 층/부서마다 다른 출입 규칙
                    - ECS-SG : 8081 포트만
                               3306 포트만
    
    2. 보안 그룹 vs 서브넷
        1) 보안 그룹 (Security Group) = 방화벽 규칙
            - 역할
                - WHO (누가) + WHAT (무엇을) 제어
                    - 인바운드 규칙 : 누가 들어올 수 있나?
                        - 예: "0.0.0.0/0에서 80 포트로 접근 허용"
                            - 모든 사람이 http로 접근 가능
                    - 아웃바운드 규칙 : 어디로 나갈 수 있나?
                        - 예: "모든 대상으로 모든 포트 허용"
                            - 내부에서 외부로 자유롭게 통신
                - 핵심 : 트래픽 허용/차단 (포트, IP, 프로토콜)
                    - 비유 : 경비원이 신분증 보고 "출입 가능/불가능" 판단
        2) 서브넷 (Subnet) = 네트워크 구역
            - 역할
                - WHERE (어디에) 배치되는가
                    - Public Subnet : 인터넷 직접 연결 가능한 구역
                        - 라우트 테이블 : 0.0.0.0/0 -> IGW
                        - 용도 : 외부 노출이 필요한 리소스 (ALB, NAT)
                    - Private Subnet : 인터넷 직접 연결 차단된 구역
                        - 라우트 테이블 : 0.0.0.0/0 -> NAT Gateway
                        - 용도 : 보호가 필요한 리소스 (ECS, RDS)
                - 핵심 : 네트워크 위치 + 인터넷 연결 방식
                    - 비유 : 1층(Public) vs 2층 이상(Private) 위치 구분
    
    3. 보안 그룹 + 서브넷
        1) 1단계 : 서브넷 (네트워크 계층 제어)

        Public Subnet                통과           Private Subnet
         라우트 : 0.0.0.0/0 => IGW  ------->    라우트 : 0.0.0.0/0 => NAT     <------- 외부 접근 차단
         인터넷 직접 연결 허용                    인터넷 직접 연결 차단
        2) 2단계 : 보안 그룹 (트래픽 세부 제어)

                library-alb-sg                          library-ecs-task-sg                library-rds-sg 
                 인바운드 : 8081, 443                   인바운드 : 8081                      인바운드 : 3306
                 출처 : 0.0.0.0/0 (모든 곳) ---------->  출처 : library-alb-sg만 ---------->  출처 : library-ecs-task-sg만 <-------- 외부 접근 차단
                 = HTTP / HTTPS                         = ALB에서만 접근 허용                 = ECS에서만 DB 접근

* 4단계 작업 순서
    1) VPC + Security Groups (네트워크 & 보안 설정)
    2) ALB + Target Groups (로드밸런서 - 트래픽 분산)
    3) Parameter Store (DB 비밀번호 같은 민간정보 저장)
    4) ECS Service (실제 컨테이너 실행)

* VPC 확인
    1) 목적 : ECS와 ALB가 통신할 네트워크 공간 확인
    2) 필요이유
        - AWS 리소스들은 VPC 안에서 동작함
        - 기본 VPC를 사용하면 빠르게 시작 가능
        - 나중에 ALB, ECS Task가 이 VPC 안에 배치됨
    3) VPC ID : vpc-00b3665160d247244

* 서브넷 2개를 사용
    1) AWS ALB는 최소 2개의 서로 다른 가용영역(AZ=Available Zone) 필요 (강제 요구사항)
        - 한 데이터센터 장애 시 다른 데이터센터가 서비스 계속 제공 (가용성이 높음)
        - 1개만 선택하면 ALB 생성 자체가 안 됨
    2) 가용영역(AZ)
        - 서울 리전 안에 물리적으로 분리되어 있는 데이터센터들
        - ap-northeast-2a, 2b, 2c, 2d = 각각 다른 건물, 다른 전력, 다른 네트워크

* Security Group #1 생성하기